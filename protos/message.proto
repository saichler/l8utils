syntax = "proto3";

package types;

option java_multiple_files = true;
option java_outer_classname = "Types";
option java_package = "com.shared.types";
option go_package = "./types";

import "request.proto";

/*
  Message is to transmit a piece of data, securely, from one process to one or more processes via
  Publish/Subscribe or Reuest/Reply
 */
message Message {
  // The source uuid identifier of the message sender
  string source_uuid = 1;
  // The destination uuid/or multicast group name of the message receiver.
  string destination = 2;
  // To uniquely identify the source message, the sender process maintain a sequence number.
  int32 sequence = 3;
  // Priority of this Message for the handler callback.
  int32 priority = 4;
  // The protobuf marshaled data, encoded to base64 string
  string data = 5;
  // The type name of the serialized data
  string type = 6;
  // Action to invoke with this data on the service point
  types.Request request = 7;
}

// A config for the messages limitation and data size
message MessagingConfig {
  // The maximum data size for a message
  uint64 max_data_size = 1;
  // The transmit message queue size
  uint64 tx_queue_size = 2;
  // The received message queue size
  uint64 rx_queue_size = 3;
  // What is the switch port for this configuration
  uint32 switch_port = 4;
  // Send Status Info
  bool send_status_info = 5;
  // Send Status Info Interval in seconds
  uint64 send_status_interval_seconds = 6;
  // The Uuid to use
  string uuid = 7;
  // Is this a switch edge and part of the switch table
  bool isSwitch = 8;
  // The zSideUuid
  string z_uuid = 9;
  // The local/remote address, depending on if this edge is the initiator of the connection
  string addr = 10;
  // If we want to connect two switches in the same machine, this indicates to the
  // receiver of the connection request that it's adjucent is a switch.
  // Otherwise, because they are on the same machine, it will autodetect the adjacent as
  // a regular edge as it has the same IP.
  bool isAdjacentASwitch = 11;
}